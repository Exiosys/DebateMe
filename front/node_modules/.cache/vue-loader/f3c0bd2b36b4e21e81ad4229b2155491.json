{"remainingRequest":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brdnicolas/Desktop/DebateMe/front/src/components/admin/Reports.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/brdnicolas/Desktop/DebateMe/front/src/components/admin/Reports.vue","mtime":1597089574562},{"path":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brdnicolas/Desktop/DebateMe/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCByZXBvcnQgZnJvbSAiQC9jb21wb25lbnRzL2FkbWluL21pbmktY29tcG9uZW50cy9yZXBvcnQtY29tcC52dWUiOwppbXBvcnQgTWVudSBmcm9tICJAL2NvbXBvbmVudHMvYWRtaW4vTWVudS52dWUiOwppbXBvcnQgSGVhZGVyIGZyb20gIkAvY29tcG9uZW50cy9taW5pLWNvbXBvbmVudHMvaGVhZGVyLnZ1ZSI7CmltcG9ydCBMaW5lQ2hhcnQgZnJvbSAnLi9MaW5lQ2hhcnQuanMnOwppbXBvcnQgbXlBUEkgZnJvbSAiQC9jb21wb25lbnRzL215QVBJIjsKCi8qCjxkaXYgc3R5bGU9IndpZHRoOjUwMHB4O2hlaWdodDo1MDBweDsiPgogICAgPGxpbmUtY2hhcnQgOmNoYXJ0LWRhdGE9ImRhdGFjb2xsZWN0aW9uIj48L2xpbmUtY2hhcnQ+CjwvZGl2PgoqLwoKQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSGVhZGVyLAogICAgICAgIExpbmVDaGFydCwKICAgICAgICByZXBvcnQsCiAgICAgICAgTWVudQogICAgfSwKfSkKCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbGxvV29ybGQgZXh0ZW5kcyBWdWUgewogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmNoZWNrQWRtaW4oKTsKICAgICAgICB0aGlzLmdldFJlcG9ydHMoKTsKICAgIH0KCiAgICByZWRpcmVjdFRvKHBhZ2U6IHN0cmluZyk6IHZvaWQgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nICsgcGFnZTsKICAgIH0KCiAgICByZXBvcnRzOiBvYmplY3Q7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIHRoaXMucmVwb3J0cyA9IFtdOwogICAgfQoKICAgIGFzeW5jIGdldFJlcG9ydHMoKTogUHJvbWlzZTx2b2lkPiB7CiAgICAgICAgbGV0IHJlcCA9IG51bGw7CiAgICAgICAgYXdhaXQgbXlBUEkuZ2V0KCJyZXBvcnRzLyIpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgcmVwID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgICAgICBpZiAocmVwKSB7CiAgICAgICAgICAgIHRoaXMucmVwb3J0cyA9IHJlcDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVwKTsKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgZGVsZXRlUG9zdChpZFBvc3Q6IG51bWJlcik6IFByb21pc2U8dm9pZD4gewogICAgICAgIGxldCByZXBvbnNlID0gMDsKICAgICAgICBhd2FpdCBteUFQSS5kZWxldGUoInBvc3RzLyIgKyBpZFBvc3QpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVwKSB7CiAgICAgICAgICAgIHJlcG9uc2UgPSAxOwogICAgICAgIH0pOwogICAgICAgIGlmKHJlcG9uc2UpCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgIH0KCiAgICBhc3luYyBkZWxldGVSZXBvcnQoaWRSZXBvcnQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4gewogICAgICAgIGxldCByZXBvbnNlID0gMDsKICAgICAgICBhd2FpdCBteUFQSS5kZWxldGUoInJlcG9ydHMvIiArIGlkUmVwb3J0KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcCkgewogICAgICAgICAgICByZXBvbnNlID0gMTsKICAgICAgICB9KTsKICAgICAgICBpZihyZXBvbnNlKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICB9CgogICAgYXN5bmMgY2hlY2tBZG1pbigpOiBQcm9taXNlPHZvaWQ+IHsKICAgICAgICBsZXQgcmVwID0gbnVsbDsKICAgICAgICBhd2FpdCBteUFQSS5nZXQoInVzZXJzL21lL3Byb2ZpbGUiKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHJlcCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHJlcCkgewogICAgICAgICAgICBpZiggIShyZXAgYXMgUmVjb3JkPHN0cmluZyxhbnk+KS5pc0FkbWluICkKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nOwogICAgICAgIH0KICAgIH0KCgp9Cg=="},{"version":3,"sources":["Reports.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"Reports.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <Header/>\r\n        <div class=\"main2\">\r\n            <Menu/>\r\n            <div class=\"subMain\">\r\n                <div class=\"content\">\r\n                    <h1>Signalements</h1>\r\n                    <ul>\r\n                        <li v-for=\"item in this.reports\" :key=\"item.id\">\r\n                            <report :type=\"item.reason_report_id\" :post_id=\"item.post_id\" :message=\"item.message\" :date=\"item.created_at\"/>\r\n                            <div class=\"choose\">\r\n                                <img @click=\"deletePost(item.post_id)\" alt=\"delete\" src=\"../../assets/icon/admin/croix.png\"/>\r\n                                <img @click=\"deleteReport(item.id)\" alt=\"keep\" src=\"../../assets/icon/admin/check.png\"/>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Component, Prop, Vue } from 'vue-property-decorator';\r\n    import report from \"@/components/admin/mini-components/report-comp.vue\";\r\n    import Menu from \"@/components/admin/Menu.vue\";\r\n    import Header from \"@/components/mini-components/header.vue\";\r\n    import LineChart from './LineChart.js';\r\n    import myAPI from \"@/components/myAPI\";\r\n\r\n    /*\r\n    <div style=\"width:500px;height:500px;\">\r\n        <line-chart :chart-data=\"datacollection\"></line-chart>\r\n    </div>\r\n    */\r\n\r\n    @Component({\r\n        components: {\r\n            Header,\r\n            LineChart,\r\n            report,\r\n            Menu\r\n        },\r\n    })\r\n\r\n    export default class HelloWorld extends Vue {\r\n        mounted() {\r\n            this.checkAdmin();\r\n            this.getReports();\r\n        }\r\n\r\n        redirectTo(page: string): void {\r\n            window.location.href = '/' + page;\r\n        }\r\n\r\n        reports: object;\r\n        constructor() {\r\n            super();\r\n            this.reports = [];\r\n        }\r\n\r\n        async getReports(): Promise<void> {\r\n            let rep = null;\r\n            await myAPI.get(\"reports/\")\r\n            .then(function(response) {\r\n                rep = response.data;\r\n            });\r\n            if (rep) {\r\n                this.reports = rep;\r\n                console.log(rep);\r\n            }\r\n        }\r\n\r\n        async deletePost(idPost: number): Promise<void> {\r\n            let reponse = 0;\r\n            await myAPI.delete(\"posts/\" + idPost)\r\n            .then(function(rep) {\r\n                reponse = 1;\r\n            });\r\n            if(reponse)\r\n                this.$router.go(0);\r\n        }\r\n\r\n        async deleteReport(idReport: number): Promise<void> {\r\n            let reponse = 0;\r\n            await myAPI.delete(\"reports/\" + idReport)\r\n            .then(function(rep) {\r\n                reponse = 1;\r\n            });\r\n            if(reponse)\r\n                this.$router.go(0);\r\n        }\r\n\r\n        async checkAdmin(): Promise<void> {\r\n            let rep = null;\r\n            await myAPI.get(\"users/me/profile\")\r\n            .then(function(response) {\r\n                rep = response.data;\r\n            });\r\n            if (rep) {\r\n                if( !(rep as Record<string,any>).isAdmin )\r\n                    window.location.href = '/';\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n    .main {\r\n        background:#f8f9fe;\r\n        max-height: 100%;\r\n    }\r\n    .main2 {\r\n        display:flex;\r\n        flex-direction: row;\r\n    }\r\n\r\n    .subMain {\r\n        padding:50px;\r\n        width:calc(100% - 220px);\r\n        max-height:calc(100vh - 50px);\r\n        overflow: scroll;\r\n    }\r\n    .main2 {\r\n        max-height:100%;\r\n        overflow:hidden;\r\n    }\r\n    .subMain .graph1 h1 {\r\n        text-align: center;\r\n        font-weight:bold;\r\n        color:#154a85;\r\n        font-size: 18px;\r\n    }\r\n    .content ul {\r\n        list-style: none;\r\n        padding-bottom:100px;\r\n    }\r\n    .content li {\r\n        display:flex;\r\n        flex-direction: row;\r\n    }\r\n    .content li img {\r\n        cursor:pointer;\r\n        width:30px;\r\n        height:30px;\r\n        margin-top:10px;\r\n        margin-left:10px;\r\n    }\r\n    .content li img:first-child {\r\n        margin-top:40px;\r\n    }\r\n    .content h1 {\r\n        color:#1072ff;\r\n    }\r\n    .choose {\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n</style>\r\n"]}]}
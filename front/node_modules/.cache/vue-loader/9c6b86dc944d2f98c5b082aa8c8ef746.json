{"remainingRequest":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/beelee_the_bee/Documents/ETNA/PLI/front/src/components/mini-components/commentaire.vue?vue&type=style&index=0&id=0e9e7ad2&scoped=true&lang=css&","dependencies":[{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/src/components/mini-components/commentaire.vue","mtime":1595668326085},{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/beelee_the_bee/Documents/ETNA/PLI/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3JlcG9ydCB7CiAgICB3aWR0aDoyMHB4OwogICAgaGVpZ2h0OjIwcHg7CiAgICBib3JkZXItcmFkaXVzOiAwOwp9Ci5kYXRlIHsKICAgIGZvbnQtc2l6ZToxM3B4OwogICAgY29sb3I6Izc0OWNkNzsKICAgIG1hcmdpbi1sZWZ0OjIwcHg7CiAgICBtYXJnaW4tdG9wOjIwcHg7CiAgICBmb250LXdlaWdodDogNTAwOwp9Ci5ib3R0b20gaW1nIHsKICAgICB3aWR0aDoxNXB4OwogICAgIGhlaWdodDoxNXB4OwogICAgIGN1cnNvcjpwb2ludGVyOwogfQouYm90dG9tLCAuYm90dG9tIGRpdiB7CiAgICBkaXNwbGF5OmZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQouYm90dG9tIGRpdiB7CiAgICBtYXJnaW4tcmlnaHQ6ODBweDsKfQouYm90dG9tIHsKICAgIG1hcmdpbi1sZWZ0OjIwcHg7CiAgICBtYXJnaW4tdG9wOjIwcHg7CiAgICBwYWRkaW5nLWJvdHRvbToyMHB4Owp9CgouYm90dG9tIHAgewogICAgbWFyZ2luLWxlZnQ6NHB4OwogICAgYmFja2dyb3VuZDogI2YxZjFmMTsKICAgIGZvbnQtc2l6ZToxMnB4OwogICAgZm9udC13ZWlnaHQ6IDcwMDsKICAgIGNvbG9yOiMxODY0ZmY7CiAgICBwYWRkaW5nOjVweDsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIGhlaWdodDoxNXB4Owp9CgouYm90dG9tIGgyIHsKICAgIGZvbnQtc2l6ZToxMnB4OwogICAgY29sb3I6IzE4NjRmZjsKICAgIG1hcmdpbi1sZWZ0OjJweDsKICAgIGN1cnNvcjpwb2ludGVyOwp9Ci5tZXNzYWdlIHsKICAgIG1hcmdpbi1sZWZ0OjIwcHg7CiAgICBtYXJnaW4tdG9wOjEwcHg7CiAgICBmb250LXdlaWdodDogNTAwOwogICAgcGFkZGluZy1yaWdodDoyMHB4Owp9Ci5jb21tZW50IHsKICAgIHdpZHRoOjgwdnc7CiAgICBtYXJnaW4tbGVmdDoxMHZ3OwogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDVweCAwcHggcmdiYSgyMTcsMjE3LDIxNywxKTsKICAgIC1tb3otYm94LXNoYWRvdzogMHB4IDBweCA1cHggMHB4IHJnYmEoMjE3LDIxNywyMTcsMSk7CiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAwcHggcmdiYSgyMTcsMjE3LDIxNywxKTsKICAgIG1hcmdpbi10b3A6MjBweDsKfQoKLnRvcCB7CiAgICBkaXNwbGF5OmZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgcGFkZGluZzogMjBweCAwIDAgMjBweDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLmxlZnQgewogICAgZGlzcGxheTpmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IHJvdzsKfQoucmlnaHQgewogICAgcGFkZGluZy1yaWdodDoyMHB4OwogICAgZm9udC13ZWlnaHQ6IDgwMDsKICAgIGNvbG9yOiMxODY0ZmY7CiAgICBjdXJzb3I6cG9pbnRlcjsKfQoudG9wIGltZyB7CiAgICB3aWR0aDo2MHB4OwogICAgaGVpZ2h0OjYwcHg7CiAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7CiAgICBjdXJzb3I6cG9pbnRlcjsKfQoudXNlcm5hbWUgewogICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgIG1hcmdpbi1sZWZ0OjEwcHg7CiAgICBmb250LXNpemU6MjBweDsKICAgIGN1cnNvcjpwb2ludGVyOwp9Ci5jaXRhdGlvbiB7CiAgICBjb2xvcjojYTdhN2E3OwogICAgZm9udC1zaXplOjEzcHg7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgbWFyZ2luLWxlZnQ6MTBweDsKICAgIG1hcmdpbi10b3A6M3B4Owp9Ci51cHZvdGVkIGgyIHsKICAgIGNvbG9yOiNhN2E3YTc7Cn0KLnVwdm90ZSBoMiB7CiAgICBjb2xvcjogIzE4NjRmZjsKfQo="},{"version":3,"sources":["commentaire.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"commentaire.vue","sourceRoot":"src/components/mini-components","sourcesContent":["\r\n<template>\r\n    <div class=\"comment\">\r\n        <div class=\"top\">\r\n            <div class=\"left\">\r\n                <img @click=\"showProfil(user.username)\" v-if=\"!commentaire.isAnonym\" :alt=\"user.username\" src=\"../../assets/categories/nature.jpg\"/>\r\n                <div v-if=\"!commentaire.isAnonym\">\r\n                    <h3 @click=\"showProfil(user.username)\" class=\"username\">{{user.username}}</h3>\r\n                    <p class=\"citation\">{{user.quote}}</p>\r\n                </div>\r\n                <img v-if=\"commentaire.isAnonym\" :alt=\"user.username\" src=\"../../assets/img/anonymous.png\"/>\r\n                <div v-if=\"commentaire.isAnonym\">\r\n                    <h3 class=\"username\">Anonyme</h3>\r\n                    <p class=\"citation\">La célébrité n'est pas facile à assumer, je ne vois rien de pire, si peut-être, l'anonymat.</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"right\">\r\n                <img @click=\"sendReport\" id=\"report\" title=\"signaler\" alt=\"signaler\" src=\"../../assets/icon/report.png\"/>\r\n            </div>\r\n        </div>\r\n        <p class=\"date\">{{this.date}}</p>\r\n        <p class=\"message\">{{commentaire.content}}</p>\r\n        <div class=\"bottom\">\r\n            <div class=\"upvote\">\r\n                <img src=\"../../assets/icon/upvote.png\"/>\r\n                <h2 @click=\"upVote\" >Upvoted</h2>\r\n                <p>{{commentaire.up}}</p>\r\n                <p>{{this.voted}}</p>\r\n            </div>\r\n            <div>\r\n                <img src=\"../../assets/icon/comment.png\"/>\r\n                <h2>Comments</h2>\r\n                <p>{{commentaire.down}}</p>\r\n            </div>\r\n            <div>\r\n                <img src=\"../../assets/icon/share.png\"/>\r\n                <h2>Share</h2>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    // @ts-nocheck\r\n    import { Component, Prop, Vue } from 'vue-property-decorator';\r\n    import moment from 'moment'\r\n    import Swal from 'sweetalert2/dist/sweetalert2.js'\r\n    import myAPI from \"@/components/myAPI\";\r\n    @Component\r\n    export default class Header extends Vue {\r\n\r\n        @Prop({default: \"Attente d'informations\"})\r\n        message: string | undefined;\r\n        @Prop({default:true})\r\n        anonym: boolean | undefined;\r\n        @Prop({default:{}})\r\n        commentaire: object | undefined;\r\n        @Prop({default:1})\r\n        questionID: number | undefined;\r\n        @Prop({default:{}})\r\n        user: object | undefined;\r\n        @Prop({default:[]})\r\n        votes: Array<number> | undefined;\r\n        date: string;\r\n        voted: boolean;\r\n        currentUser: object;\r\n\r\n        constructor() {\r\n            super();\r\n            this.date = \"\";\r\n            this.voted = false;\r\n            this.currentUser = {};\r\n        }\r\n\r\n        showProfil(username: string): void {\r\n            window.location.href = \"/profil/\" + username;\r\n        }\r\n\r\n        created() {\r\n            moment.locale('fr');\r\n            if (this.commentaire)\r\n                this.date = moment((this.commentaire as Record<string, any>).created_at).fromNow()\r\n        }\r\n\r\n        mounted() {\r\n            this.getCurrentUser();\r\n            console.log(this.user);\r\n        }\r\n\r\n        async sendReport(): Promise<void> {\r\n            this.$fire({\r\n                title: \"Choisissez la raison de votre signalement\",\r\n                showCancelButton: true,\r\n                html:\r\n                    '<div class=\"test\" style=\"text-align:left\">' +\r\n                    '<div><input type=\"radio\" id=\"choose\" name=\"reportCause\" value=\"aucune\" checked>' +\r\n                    '<label style=\"margin-left:10px;\" for=\"choose\">Aucune</label></div>' +\r\n                    '<div><input type=\"radio\" id=\"injure\" name=\"reportCause\" value=\"1\">' +\r\n                    \"<label style='margin-left:10px;' for='injure'>Injures</label></div>\" +\r\n\r\n                    '<div><input type=\"radio\" id=\"place\" name=\"reportCause\" value=\"2\">' +\r\n                    \"<label style='margin-left:10px;' for='place'>Contenu innaproprié</label></div>\" +\r\n\r\n                    '<div><input type=\"radio\" id=\"sexisme\" name=\"reportCause\" value=\"5\">' +\r\n                    \"<label style='margin-left:10px;' for='sexisme'>Sexisme</label></div>\" +\r\n\r\n                    '<div><input type=\"radio\" id=\"racisme\" name=\"reportCause\" value=\"4\">' +\r\n                    '<label style=\"margin-left:10px;\" for=\"racisme\">Racisme</label></div>' +\r\n\r\n                    '<div><input type=\"radio\" id=\"formulation\" name=\"reportCause\" value=\"3\">' +\r\n                    '<label style=\"margin-left:10px;\" for=\"formulation\">Formulation</label></div>' +\r\n\r\n                    '</div>' +\r\n                    '<h3 style=\"text-align:left;margin-top:20px\">Voulez-vous préciser ?</h3>' +\r\n                    '<textarea style=\"resize:none;height:100px;padding-top:10px;\" id=\"swal-textarea1\" class=\"swal2-input\">',\r\n                type: \"warning\",\r\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            }).then(r => {\r\n                console.log(r.dismiss);\r\n                const radios = document.getElementsByName('reportCause');\r\n                let type = 0;\r\n                for (let i = 0, length = radios.length; i < length; i++) {\r\n                    if (radios[i].checked) {\r\n                        type = radios[i].value;\r\n                        break;\r\n                    }\r\n                }\r\n                let message = document.getElementById(\"swal-textarea1\").value;\r\n                if(!message)\r\n                    message = null;\r\n\r\n                console.log(message);\r\n\r\n                const Toast = Swal.mixin({\r\n                    toast: true,\r\n                    position: 'top-end',\r\n                    showConfirmButton: false,\r\n                });\r\n                console.log(r);\r\n\r\n                if( r.dismiss != \"cancel\" && r.dismiss != \"esc\" && r.dismiss != \"backdrop\") {\r\n                    if(type == \"aucune\") {\r\n                        Toast.fire({\r\n                            icon: 'error',\r\n                            title: \"Vous n'avez aucune raison de le signaler.\"\r\n                        })\r\n                    } else {\r\n\r\n                        myAPI.post(\"reports\", {\r\n                            'post_id' : this.commentaire.id,\r\n                            'reason_report_id' : type,\r\n                            'message': message\r\n                        }).then((response: { data: any}) =>  {\r\n                            Toast.fire({\r\n                                icon: 'success',\r\n                                title: 'Nous avons reçu votre signalement !'\r\n                            })\r\n                        }).catch(error => {\r\n                            console.log(error);\r\n                            Toast.fire({\r\n                                icon: 'error',\r\n                                title: \"Une erreure s'est produite lors de l'envoie..\"\r\n                            })\r\n                        });\r\n\r\n                    }\r\n                }\r\n\r\n\r\n            });\r\n        }\r\n\r\n        async getCurrentUser(): Promise<void> {\r\n            let rep = null;\r\n\r\n            await myAPI.get(\"users/me/profile\").then((response: { data: any}) =>  {\r\n                rep = response.data;\r\n            });\r\n\r\n\r\n            if (rep) {\r\n                this.currentUser = rep;\r\n            }\r\n            this.voted = !!this.votes?.includes((this.currentUser as Record<string, any>).id);\r\n\r\n        }\r\n\r\n        async upVote(): Promise<void> {\r\n            await myAPI.get(\"posts/\" + (this.commentaire as Record<string, any>).id + \"/vote\" );\r\n            this.voted = !this.voted;\r\n            this.$forceUpdate();\r\n            this.$emit('refresh');\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    #report {\r\n        width:20px;\r\n        height:20px;\r\n        border-radius: 0;\r\n    }\r\n    .date {\r\n        font-size:13px;\r\n        color:#749cd7;\r\n        margin-left:20px;\r\n        margin-top:20px;\r\n        font-weight: 500;\r\n    }\r\n    .bottom img {\r\n         width:15px;\r\n         height:15px;\r\n         cursor:pointer;\r\n     }\r\n    .bottom, .bottom div {\r\n        display:flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n    }\r\n    .bottom div {\r\n        margin-right:80px;\r\n    }\r\n    .bottom {\r\n        margin-left:20px;\r\n        margin-top:20px;\r\n        padding-bottom:20px;\r\n    }\r\n\r\n    .bottom p {\r\n        margin-left:4px;\r\n        background: #f1f1f1;\r\n        font-size:12px;\r\n        font-weight: 700;\r\n        color:#1864ff;\r\n        padding:5px;\r\n        border-radius: 3px;\r\n        height:15px;\r\n    }\r\n\r\n    .bottom h2 {\r\n        font-size:12px;\r\n        color:#1864ff;\r\n        margin-left:2px;\r\n        cursor:pointer;\r\n    }\r\n    .message {\r\n        margin-left:20px;\r\n        margin-top:10px;\r\n        font-weight: 500;\r\n        padding-right:20px;\r\n    }\r\n    .comment {\r\n        width:80vw;\r\n        margin-left:10vw;\r\n        -webkit-box-shadow: 0px 0px 5px 0px rgba(217,217,217,1);\r\n        -moz-box-shadow: 0px 0px 5px 0px rgba(217,217,217,1);\r\n        box-shadow: 0px 0px 5px 0px rgba(217,217,217,1);\r\n        margin-top:20px;\r\n    }\r\n\r\n    .top {\r\n        display:flex;\r\n        flex-direction: row;\r\n        padding: 20px 0 0 20px;\r\n        justify-content: space-between;\r\n    }\r\n\r\n    .left {\r\n        display:flex;\r\n        flex-direction: row;\r\n    }\r\n    .right {\r\n        padding-right:20px;\r\n        font-weight: 800;\r\n        color:#1864ff;\r\n        cursor:pointer;\r\n    }\r\n    .top img {\r\n        width:60px;\r\n        height:60px;\r\n        object-fit: cover;\r\n        border-radius: 50px;\r\n        cursor:pointer;\r\n    }\r\n    .username {\r\n        font-weight: 500;\r\n        margin-left:10px;\r\n        font-size:20px;\r\n        cursor:pointer;\r\n    }\r\n    .citation {\r\n        color:#a7a7a7;\r\n        font-size:13px;\r\n        font-weight: 400;\r\n        margin-left:10px;\r\n        margin-top:3px;\r\n    }\r\n    .upvoted h2 {\r\n        color:#a7a7a7;\r\n    }\r\n    .upvote h2 {\r\n        color: #1864ff;\r\n    }\r\n</style>\r\n"]}]}